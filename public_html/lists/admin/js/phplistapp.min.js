var busyImage='<img src="images/busy.gif" with="34" height="34" border="0" alt="Please wait" />',menuArrowImage="ui/lite/images/menuarrow.png",menuArrowActiveImagesrc="ui/lite/images/menuarrow_active.png";function urlParameter(a,b){var a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),c=RegExp("[\\?&]"+a+"=([^&#]*)").exec(b);return null==c?"":c[1]}
function messageStatusUpdate(a){$("#messagestatus"+a).load("./?page=pageaction&ajaxed=true&action=msgstatus&id="+a,"",function(){});setTimeout("messageStatusUpdate("+a+")",5E3)}function getServerTime(){$("#servertime").load("./?page=pageaction&ajaxed=true&action=getservertime","",function(){});setTimeout("getServerTime()",60100)}
function refreshCriteriaList(){var a=urlParameter("id",document.location);$("#existingCriteria").html(busyImage);$("#existingCriteria").load("./?page=pageaction&ajaxed=true&action=listcriteria&id="+a)}function openDialog(a){$("#dialog").dialog({minHeight:400,width:600,modal:!0,show:"blind",hide:"explode"});var b=urlParameter("page",a),a=a.replace(/page=/,"origpage=");$("#dialog").load(a+"&ajaxed=true&page=pageaction&action="+b)}
function totalSentUpdate(a){$("#totalsent"+a).load("./?page=pageaction&ajaxed=true&action=msgsent&id="+a,"",function(){});setTimeout("totalSentUpdate("+a+")",5E3)}
$(document).ready(function(){$(".note .hide").click(function(){$(this).parents(".note").hide()});$(".configurelink").click(function(){$("#configurecontent").load("./?page=ajaxcall&action=test");$("#configurecontent").show();return!1});$("a.ajaxable").click(function(){var a=this.href,b=urlParameter("page",window.location.href);""==urlParameter("action",a)&&(a+="&action="+b);parent=$(this).parent();parent.html(busyImage);a=a.replace(/page=/,"origpage=");parent.load(a+"&ajaxed=true&page=pageaction");
return!1});$("input:checkbox.checkallcheckboxes").click(function(){this.checked?$("input[type=checkbox]:not(:checked)").each(function(){this.checked=!0}):$("input[type=checkbox]:checked").each(function(){this.checked=!1})});$.fn.accordion&&$(".accordion").accordion({autoHeight:!1,navigation:!0,collapsible:!0});$(".opendialog").click(function(){openDialog(this.href);return!1});$(".helpdialog").click(function(){openDialog(this.href);return!1});$(".closedialog").click(function(){$("#dialog").dialog("close")});
$("div.dropButton img.arrow").click(function(){submenu=$(this).parent().parent().find("div.submenu");"block"==submenu.css("display")?(submenu.hide(),$(this).attr("src",menuArrowImagesrc)):(submenu.fadeIn(),$(this).attr("src",menuArrowActiveImagesrc));return!1});$.fn.tabs&&($(".tabbed").tabs({ajaxOptions:{error:function(a,b,c,d){$(d.hash).html("Error fetching page")}}}),$(".tabbed1").tabs());$("#remoteurlinput").focus(function(){if(this.value=="e.g. http://www.phplist.com/testcampaign.html")this.value=
""});$("#remoteurlinput").blur(function(){if(this.value=="")this.value="e.g. http://www.phplist.com/testcampaign.html";else{$("#remoteurlstatus").html(busyImage);$("#remoteurlstatus").load("./?page=pageaction&action=checkurl&ajaxed=true&url="+this.value)}});$("input:radio[name=sendmethod]").change(function(){if(this.value=="remoteurl"){$("#remoteurl").show();$("#messagecontent").hide()}else{$("#remoteurl").hide();$("#messagecontent").show()}});$("a.savechanges").click(function(){if(changed){document.sendmessageform.followupto.value=
this.href;document.sendmessageform.submit();return false}});$("#criteriaSelect").change(function(){var a=$("#criteriaSelect").val();switch(aT[a]){case "checkbox":$("#criteriaAttributeOperator").html('<input type="hidden" name="criteria_operator" value="is" />');$("#criteriaAttributeValues").html('CHECKED <input type="radio" name="criteria_values" value="checked" /> UNCHECKED <input type="radio" name="criteria_values" value="unchecked" />');break;case "checkboxgroup":case "select":case "radio":$("#criteriaAttributeOperator").html('IS <input type="radio" name="criteria_operator" value="is" checked="checked" /> IS NOT <input type="radio" name="criteria_operator" value="isnot" />');
$("#criteriaAttributeValues").html(busyImage);$("#criteriaAttributeValues").load("./?page=pageaction&ajaxed=true&action=attributevalues&name=criteria_values&type=multiselect&attid="+a);break;case "date":$("#criteriaAttributeOperator").html('IS <input type="radio" name="criteria_operator" value="is" checked="checked" /> IS NOT <input type="radio" name="criteria_operator" value="isnot" /> IS BEFORE <input type="radio" name="criteria_operator" value="isbefore" /> IS AFTER <input type="radio" name="criteria_operator" value="isafter" />');
$("#criteriaAttributeValues").html('<input type="text" id="datepicker" name="criteria_values" size="30"/>');$("#datepicker").datepicker({dateFormat:"yy-mm-dd"});break;default:$("#criteriaAttributeOperator").html("");$("#criteriaAttributeValues").html("")}});$("#initialadminpassword").keyup(function(){this.value.length>8&&$("#initialisecontinue").removeAttr("disabled")});$(".actionresult").delay(4E3).fadeOut(4E3);$(".result").delay(4E3).fadeOut(4E3);$("#spinner").html(busyImage);$("#stopqueue").click(function(){$("#processqueueoutput").html("Processing cancelled");
$("#spinner").html("&nbsp;");$("#stopqueue").hide();$("#resumequeue").show()});document.cookie="browsetrail="+escape(document.location.search)});function allDone(){$("#processqueueoutput").html("All done");$("#spinner").html("&nbsp;");$("#stopqueue").hide();$("#resumequeue").show();$("#progressmeter").hide()}var overallTotal=0,overallSent=0;
$.fn.updateProgress=function(a){var a=a.split(",")||{},b=parseInt(a[1]);b>overallTotal&&(overallTotal=b);a=parseInt(a[0]);0<a&&(overallSent+=a);a=0==overallTotal?0:parseInt(100*(overallSent/overallTotal));$("#progress").width(5*a);$("#progress").html(a+"%");$("#progresscount").html(overallSent+" / "+overallTotal)};var helpwin=null,helploc=null;function deleteRec(a){confirm("Are you sure you want to delete this record?")&&(document.location=a)}
function deleteRec2(a,b){confirm(a)&&(document.location=b)}function help(a){helpwin&&!helpwin.closed?(helpwin.close(),helpwin="",helploc=a,setTimeout("openhelp()",500)):(helploc=a,openhelp())}function openhelp(){helpwin=window.open(helploc,"help","screenX=100,screenY=100,width=350,height=350,scrollbars=yes");window.focus&&helpwin.focus()}function print_self(){window.focus();"undefined"!=typeof window.print?window.print():show_print_alert()}
function show_print_alert(){alert("Please use your browser's print button")}function MM_openBrWindow(a,b,c){window.open(a,b,c)}var pic=null,t_url,t_w,t_h;function viewImage(a,b,c){openpic(a,b,c)}function openpic(a,b,c){if(null==b||0==b)b=120;if(null==c||0==c)c=120;pic?(pic.close(),pic=null,t_url=a,t_w=b,t_h=c,setTimeout("openit()",500)):do_openpic(a,b,c)}function openit(){do_openpic(t_url,t_w,t_h);t_h=t_w=t_url=null}
function do_openpic(a,b,c){pic=window.open(a,"picwin","dependent=yes,width="+(b+30)+",height="+(c+30)+",noresize,scrollbars=auto,toolbar=no,location=no,menubar=no,screenx=150,screeny=150")}
function createContent(){pic.document?(pic.document.write("<html><head><style>body{margin:0}</style></head><body>"),pic.document.write('<img border=0 src="'),pic.document.write("aaa"),pic.document.write('" width='),pic.document.write(100),pic.document.write(" height="),pic.document.write(200),pic.document.write("></body></html>"),window.focus&&pic.focus()):setTimeout("createContent()",100)};
